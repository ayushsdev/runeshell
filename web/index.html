<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Runeshell Local</title>
    <link rel="stylesheet" href="/vendor/xterm.css" />
    <style>
      :root {
        --bg: #0a0f14;
        --panel: rgba(11, 16, 22, 0.92);
        --panel-strong: rgba(15, 21, 29, 0.98);
        --text: #e2e8f0;
        --muted: #9aa6b2;
        --accent: #5eead4;
        --accent-strong: #34d399;
        --border: rgba(148, 163, 184, 0.2);
        --shadow: 0 8px 24px rgba(2, 6, 23, 0.4);
        --radius: 14px;
      }
      html, body { height: 100%; margin: 0; background: radial-gradient(circle at top, #0f172a, #06090f 45%, #05070b); color: var(--text); }
      body {
        display: flex;
        flex-direction: column;
        overflow: hidden;
        font-family: "Space Grotesk", "Avenir Next", "Futura", "Gill Sans", sans-serif;
      }
      #app {
        display: flex;
        flex-direction: column;
        height: 100%;
        gap: 0;
      }
      #header {
        background: var(--panel);
        border-bottom: 1px solid var(--border);
        padding: 12px 14px 8px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        box-shadow: var(--shadow);
        z-index: 3;
      }
      #topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: wrap;
      }
      #brand {
        font-weight: 600;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        font-size: 12px;
        color: var(--muted);
      }
      #status,
      #role-banner {
        padding: 6px 10px;
        background: var(--panel-strong);
        color: var(--text);
        font: 12px/1.4 "IBM Plex Mono", "SF Mono", "Menlo", "Consolas", monospace;
        border-radius: 999px;
        border: 1px solid var(--border);
        pointer-events: none;
        white-space: nowrap;
      }
      #role-banner { display: none; }
      #role-banner.writer {
        color: var(--accent-strong);
        border-color: rgba(52, 211, 153, 0.5);
      }
      #role-banner.viewer {
        color: #facc15;
        border-color: rgba(250, 204, 21, 0.5);
      }
      #tabs {
        display: flex;
        gap: 8px;
        overflow-x: auto;
        flex-wrap: nowrap;
        padding-bottom: 2px;
        scrollbar-width: none;
      }
      #tabs::-webkit-scrollbar { display: none; }
      #tabs .tab-add {
        background: transparent;
        color: var(--text);
        border: 1px dashed var(--border);
        padding: 6px 12px;
        border-radius: 999px;
        font: 12px/1 "IBM Plex Mono", "SF Mono", "Menlo", "Consolas", monospace;
        white-space: nowrap;
      }
      #tabs .tab-add.active,
      #tabs .tab-item.active .tab-name {
        color: var(--accent);
        border-color: rgba(94, 234, 212, 0.8);
      }
      .tab-item {
        display: inline-flex;
        align-items: center;
        border: 1px solid var(--border);
        border-radius: 999px;
        overflow: hidden;
        background: rgba(15, 23, 42, 0.6);
      }
      .tab-name {
        background: transparent;
        color: var(--text);
        padding: 6px 12px;
        border: none;
        font: 12px/1 "IBM Plex Mono", "SF Mono", "Menlo", "Consolas", monospace;
        white-space: nowrap;
      }
      .tab-close {
        background: transparent;
        color: var(--muted);
        border: none;
        padding: 6px 10px 6px 6px;
        font: 14px/1 "IBM Plex Mono", "SF Mono", "Menlo", "Consolas", monospace;
      }
      .tab-item.active {
        border-color: rgba(94, 234, 212, 0.7);
        box-shadow: 0 0 0 1px rgba(94, 234, 212, 0.2);
      }
      .tab-item.active .tab-close,
      .tab-item.active .tab-name {
        color: var(--accent);
      }
      .term-pane {
        height: 100%;
        width: 100%;
        padding: 0 10px;
        box-sizing: border-box;
      }
      #terminal {
        flex: 1 1 auto;
        width: 100%;
        min-height: 0;
        background: rgba(5, 8, 12, 0.75);
      }
      #terminal .xterm { height: 100%; }
      #toolbar {
        position: sticky;
        bottom: 0;
        flex: 0 0 auto;
        padding: 10px 12px calc(12px + env(safe-area-inset-bottom));
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(64px, 1fr));
        gap: 10px;
        background: var(--panel);
        border-top: 1px solid var(--border);
        z-index: 4;
      }
      #toolbar::-webkit-scrollbar { display: none; }
      #toolbar button {
        background: rgba(15, 23, 42, 0.6);
        color: var(--text);
        border: 1px solid var(--border);
        padding: 8px 10px;
        border-radius: 12px;
        text-align: center;
        font: 12px/1 "IBM Plex Mono", "SF Mono", "Menlo", "Consolas", monospace;
        touch-action: manipulation;
        transition: border-color 120ms ease, color 120ms ease, transform 120ms ease;
      }
      #toolbar button.active {
        color: var(--accent);
        border-color: rgba(94, 234, 212, 0.7);
        transform: translateY(-1px);
      }
      #toolbar button:active {
        transform: translateY(1px);
      }
      #qr-overlay {
        position: fixed;
        inset: 0;
        background: rgba(5, 8, 12, 0.82);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 10;
      }
      #qr-overlay.active {
        display: flex;
      }
      #qr-card {
        background: #0f141b;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 16px;
        max-width: 320px;
        width: calc(100% - 32px);
        color: var(--text);
        text-align: center;
      }
      #qr-image {
        width: 240px;
        height: 240px;
        background: white;
        padding: 8px;
        border-radius: 8px;
        display: inline-block;
      }
      #qr-url {
        font: 12px/1.4 Menlo, Monaco, Consolas, 'Courier New', monospace;
        word-break: break-all;
        margin-top: 12px;
      }
      #qr-close {
        margin-top: 12px;
        width: 100%;
        padding: 8px 10px;
        border-radius: 8px;
        background: transparent;
        color: var(--text);
        border: 1px solid var(--border);
      }
      @media (max-width: 720px) {
        #header {
          padding: 10px 10px 6px;
          gap: 8px;
        }
        #topbar {
          justify-content: flex-start;
        }
        #tabs {
          gap: 6px;
        }
        #toolbar {
          display: flex;
          flex-wrap: nowrap;
          overflow-x: auto;
          overflow-y: hidden;
          -webkit-overflow-scrolling: touch;
          scrollbar-width: none;
          gap: 8px;
        }
        #toolbar button {
          flex: 0 0 auto;
          white-space: nowrap;
        }
      }
    </style>
  </head>
  <body>
    <div id="app">
      <header id="header">
        <div id="topbar">
          <div id="brand">Runeshell</div>
          <div id="role-banner">View-only</div>
          <div id="status">Loading terminalâ€¦</div>
        </div>
        <div id="tabs"></div>
      </header>
      <main id="terminal"></main>
      <footer id="toolbar"></footer>
    </div>
    <div id="qr-overlay">
      <div id="qr-card">
        <div id="qr-image" aria-label="QR code"></div>
        <div id="qr-url"></div>
        <button id="qr-close" type="button">Close</button>
      </div>
    </div>
    <script src="/vendor/xterm.js"></script>
    <script src="/vendor/xterm-addon-fit.js"></script>
    <script src="/vendor/qrcode.min.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
